<body>
    <div class="container d-flex align-items-center overflow-auto">
        <table class="table table-striped table-hover m-3">
            <thead>
                <tr>
                    <th class="col text-center" id="#">#</th>
                    <th class="col text-center" id="Name">firstName</th>
                    <th class="col text-center" id="Status">Status</th>
                    <th class="col text-center" id="Details">Details</th>
                </tr>
            </thead>
            <tbody>
                <% if (members.length> 0) { %>
                    <% members.forEach((member, index)=> { %>
                        <tr>
                            <th class="text-center" scope="row">
                                <%= index+1 %>
                            </th>
                            <td class="text-center">
                                <%= member.firstName %>
                            </td>
                            <td class="text-center status">
                                <%= member.status %>
                                    <% if(member.status==="Fallen!" ) { %>
                                        <span class='d-inline-flex mb-0 circle status-indicator-fall'></span>
                                        <% } else if(member.status==="All Good!" ) { %>
                                            <span class='d-inline-flex mb-0 circle status-indicator-good'></span>
                                            <% } %>
                            </td>
                            <td class="text-center">
                                <a href="#">View Details</a>
                            </td>
                            <td class="text-center">
                                <% if(member.status==="Fallen!" ) { %>
                                    <a href="viewVideo"><i class="small material-icons">ondemand_video</i></a>
                                    <% } %>
                            </td>
                        </tr>
                        <% }) %>
                            <% } %>
            </tbody>
        </table>
        <div class="fixed-action-btn"> -
            <a class="btn-floating btn-large waves-effect waves-light red  modal-trigger" href="#addItemModal"><i
                    class="material-icons">add</i></a>
        </div>
        <!-- Modal Structure -->
        <div id="addItemModal" class="modal">
            <div class="modal-content">
                <h4>Add Member</h4>
            </div>
            <div class="row modal-content">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s6">
                            <input placeholder="FirstName" id="firstName" type="text" class="validate">
                            <label for="firstName">FirstName</label>
                        </div>
                        <div class="input-field col s6">
                            <input placeholder="LastName" id="lastName" type="text" class="validate">
                            <label for="lastName">LastName</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s6">
                            <select id="gender">
                                <option value="" disabled selected>
                                </option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                            <label for="gender">Gender</label>
                        </div>
                        <div class="input-field col s6">
                            <input placeholder="Age" id="age" type="text" class="validate">
                            <label for="age">Age</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s6">
                            <textarea placeholder="Address" id="address" rows="3"
                                class="materialize-textarea"></textarea>
                            <label for="address">Address</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s6">
                            <textarea placeholder="Description" id="description" rows="3"
                                class="materialize-textarea"></textarea>
                            <label for="description">Description</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12 center-align">
                            <a class="waves-effect waves-light btn" id="formSubmit">Add</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        $('.modal').modal();
        $('select').formSelect();

        $('#formSubmit').click(() => {
            addMemberSubmit();
        });

        const addMemberSubmit = () => {
            let memberData = {};
            memberData.firstName = $('#firstName').val();
            memberData.lastName = $('#lastName').val();
            memberData.gender = $('#gender').val();
            memberData.age = $('#age').val();
            memberData.address = $('#address').val();
            memberData.description = $('#description').val();

            $('.modal').modal('close');

            $.ajax({
                url: "/myMembers/addMember",
                data: memberData,
                type: "POST",
                success: (result) => {
                    window.location.reload();
                }
            });
        }
    </script>
</body>